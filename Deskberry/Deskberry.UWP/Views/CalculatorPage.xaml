<Page x:Class="Deskberry.UWP.Views.CalculatorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:input="using:Syncfusion.UI.Xaml.Controls.Input"
      xmlns:local="using:Deskberry.UWP.Views"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:syncresource="using:Syncfusion.UI.Xaml.Controls.Input"
      xmlns:viewModels="using:Deskberry.UWP.ViewModels"
      Background="Transparent"
      mc:Ignorable="d">
    <Page.Resources>
        <ResourceDictionary>
            <syncresource:ResourceWrapper x:Key="ResourceWrapperKey" />
            <syncresource:MemoryConverter x:Key="MemoryConverter" />

            <Style x:Key="DefaultSfCalculatorStyle"
                   TargetType="input:SfCalculator">
                <Setter Property="Height" Value="380" />
                <Setter Property="Width" Value="300" />
                <Setter Property="Background" Value="DimGray" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:SfCalculator">
                            <Border Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <syncresource:DisplayPane x:Name="PART_Display"
                                                              Grid.ColumnSpan="2"
                                                              Margin="3"
                                                              DisplayText="{Binding DisplayText, RelativeSource={RelativeSource TemplatedParent}}"
                                                              Expression="{Binding Expression, RelativeSource={RelativeSource TemplatedParent}}"
                                                              IsTabStop="False"
                                                              Memory="{Binding Memory, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <syncresource:FunctionsPane x:Name="PART_Functions"
                                                                Grid.Row="2"
                                                                Grid.Column="1"
                                                                IsTabStop="False"
                                                                Style="{TemplateBinding FunctionsPaneStyle}" />
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="SfCalculatorFunctionsPaneStyle1"
                   TargetType="input:FunctionsPane">
                <Setter Property="Foreground" Value="Black" />
                <Setter Property="Background" Value="WhiteSmoke" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:FunctionsPane">
                            <Grid x:Name="PART_Root">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <syncresource:CalculatorButton x:Name="PART_Button1"
                                                               Grid.Column="0"
                                                               Background="DarkRed"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding MC, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Function="MemoryClear"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button2"
                                                               Grid.Column="1"
                                                               Background="DarkRed"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding MR, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="MemoryRecall"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button3"
                                                               Grid.Column="2"
                                                               Background="DarkRed"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding MS, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Memory"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button4"
                                                               Grid.Column="3"
                                                               Background="DarkRed"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding MPLUS, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="MemoryAdd"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button5"
                                                               Grid.Column="4"
                                                               Background="DarkRed"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding MMINUS, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="MemorySubract"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Back"
                                                               x:Name="PART_Button6"
                                                               Grid.Row="1"
                                                               BrushOpacity="0.3"
                                                               FontSize="15"
                                                               Function="Back"
                                                               IsTabStop="False">
                                    <Path Width="20"
                                          Height="20"
                                          Margin="0,0,0,0"
                                          Data="M55.59375,47.9995803833008L69.890625,62.2964553833008 84.09375,48.0933303833008 89.953125,53.9527053833008 75.703125,68.1558303833008 89.625,82.0777053833008 83.8125,87.8902053833008 69.890625,73.9683303833008 55.640625,88.2652053833008 49.78125,82.3589553833008 63.609375,67.9214553833008 49.734375,53.8589553833008 55.59375,47.9995803833008z M31.265625,40.0308303833008L30.28125,40.5933303833008 29.25,41.4370803833008 2.43749928474426,68.1558303833008 29.203125,94.8277053833008 30.28125,95.6948928833008 31.265625,96.2808303833008 119.34375,96.2808303833008 119.34375,40.0308303833008 31.265625,40.0308303833008z M30.984375,32.5308303833008L121.546875,32.5308303833008 123.5859375,32.9527053833008 125.2734375,34.1245803833008 126.421875,35.8589553833008 126.84375,37.9683303833008 126.84375,98.3433303833008 126.421875,100.452705383301 125.2734375,102.187080383301 123.5859375,103.358955383301 121.546875,103.780830383301 30.984375,103.780830383301 28.359375,103.218330383301 26.109375,101.952705383301 23.90625,100.124580383301 -8.203125,68.1558303833008 23.90625,36.1870803833008 26.109375,34.3589553833008 28.359375,33.1167678833008 30.984375,32.5308303833008z"
                                          Fill="{TemplateBinding Foreground}"
                                          RenderTransformOrigin="0.5,0.5"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0" />
                                                <ScaleTransform ScaleX="1" ScaleY="1" />
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </syncresource:CalculatorButton>
                                <syncresource:CalculatorButton x:Name="PART_Button7"
                                                               Grid.Row="1"
                                                               Grid.Column="1"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding C, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Clear"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button8"
                                                               Grid.Row="1"
                                                               Grid.Column="2"
                                                               BrushOpacity="0.3"
                                                               Content="{Binding CE, Source={StaticResource ResourceWrapperKey}}"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="ClearEntry"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button9"
                                                               Grid.Row="1"
                                                               Grid.Column="3"
                                                               BrushOpacity="0.3"
                                                               Content="±"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Sign"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button10"
                                                               Grid.Row="1"
                                                               Grid.Column="4"
                                                               BrushOpacity="0.3"
                                                               Command="{Binding ComputeExpressionForOneParameterOperationCommand}"
                                                               Content="√"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="SquareRoot"
                                                               IsTabStop="False" />

                                <syncresource:CalculatorButton x:Name="PART_Button11"
                                                               Grid.Row="2"
                                                               Grid.Column="3"
                                                               BrushOpacity="0.3"
                                                               Content="/"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Divide"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button12"
                                                               Grid.Row="3"
                                                               Grid.Column="3"
                                                               BrushOpacity="0.3"
                                                               FontSize="15"
                                                               Function="Multiply"
                                                               IsTabStop="False">
                                    <Path Width="15"
                                          Height="15"
                                          Margin="0,0,0,0"
                                          Data="M28.03125,48.5152053833008L48,68.5308303833008 67.96875,48.5152053833008 75.515625,56.1089553833008 55.546875,76.0777053833008 75.515625,96.0464553833008 67.96875,103.593330383301 48,83.6245803833008 28.03125,103.593330383301 20.484375,96.0464553833008 40.453125,76.0777053833008 20.484375,56.1089553833008 28.03125,48.5152053833008z"
                                          Fill="{TemplateBinding Foreground}"
                                          RenderTransformOrigin="0.5,0.5"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0" />
                                                <ScaleTransform ScaleX="1" ScaleY="1" />
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </syncresource:CalculatorButton>
                                <syncresource:CalculatorButton x:Name="PART_Button13"
                                                               Grid.Row="4"
                                                               Grid.Column="3"
                                                               BrushOpacity="0.3"
                                                               FontSize="15"
                                                               Function="Subract"
                                                               IsTabStop="False">
                                    <Path Width="15"
                                          Height="15"
                                          Margin="0,0,0,0"
                                          Data="M13.078125,59.8120803833008L82.96875,59.8120803833008 82.96875,75.9370803833008 13.078125,75.9370803833008 13.078125,59.8120803833008z"
                                          Fill="{TemplateBinding Foreground}"
                                          RenderTransformOrigin="0.5,0.5"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0" />
                                                <ScaleTransform ScaleX="1" ScaleY="1" />
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </syncresource:CalculatorButton>
                                <syncresource:CalculatorButton x:Name="PART_Button14"
                                                               Grid.Row="5"
                                                               Grid.Column="3"
                                                               BrushOpacity="0.3"
                                                               FontSize="15"
                                                               Function="Add"
                                                               IsTabStop="False">
                                    <Path Width="15"
                                          Height="15"
                                          Margin="0,0,0,0"
                                          Data="M39.9375,32.9527053833008L56.0625,32.9527053833008 56.0625,59.8120803833008 82.96875,59.8120803833008 82.96875,75.9370803833008 56.0625,75.9370803833008 56.0625,102.796455383301 39.9375,102.796455383301 39.9375,75.9370803833008 13.078125,75.9370803833008 13.078125,59.8120803833008 39.9375,59.8120803833008 39.9375,32.9527053833008z"
                                          Fill="{TemplateBinding Foreground}"
                                          RenderTransformOrigin="0.5,0.5"
                                          Stretch="Uniform">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0" />
                                                <ScaleTransform ScaleX="1" ScaleY="1" />
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </syncresource:CalculatorButton>
                                <syncresource:CalculatorButton x:Name="PART_Button15"
                                                               Grid.Row="2"
                                                               Grid.Column="4"
                                                               BrushOpacity="0.3"
                                                               Content="%"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Percentage"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton x:Name="PART_Button16"
                                                               Grid.Row="3"
                                                               Grid.Column="4"
                                                               BrushOpacity="0.3"
                                                               Command="{Binding ComputeExpressionForOneParameterOperationCommand}"
                                                               Content="1/x"
                                                               FlowDirection="LeftToRight"
                                                               FontSize="15"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Reciproc"
                                                               IsTabStop="False" />

                                <syncresource:CalculatorButton x:Name="PART_Button17"
                                                               Grid.Row="4"
                                                               Grid.RowSpan="2"
                                                               Grid.Column="4"
                                                               Background="#a82828"
                                                               BrushOpacity="0"
                                                               Command="{Binding AddExpressionCommand}"
                                                               CommandParameter="{Binding ElementName=calculator, Path=Value}"
                                                               Content="="
                                                               FontSize="35"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               Function="Return"
                                                               IsTabStop="False" />
                                <syncresource:InputPane x:Name="PART_Input"
                                                        Grid.Row="2"
                                                        Grid.RowSpan="5"
                                                        Grid.ColumnSpan="3"
                                                        IsTabStop="False" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:CalculatorButton">
                <Setter Property="IsTabStop" Value="False" />
                <Setter Property="Background" Value="Gray" />
                <Setter Property="Foreground" Value="Black" />
                <Setter Property="BorderBrush" Value="DarkGray" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Margin" Value="3" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="FontFamily" Value="Segoe UI Symbol" />
                <Setter Property="FontWeight" Value="ExtraLight" />
                <Setter Property="FontSize" Value="20" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:CalculatorButton">
                            <Grid>
                                <Rectangle Fill="{TemplateBinding Background}" />
                                <Rectangle Fill="White"
                                           Opacity="{TemplateBinding BrushOpacity}" />

                                <Border x:Name="Border"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}">
                                    <ContentPresenter x:Name="ContentPresenter"
                                                      Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Content="{TemplateBinding Content}"
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      ContentTransitions="{TemplateBinding ContentTransitions}"
                                                      FontSize="16" />
                                </Border>

                                <Rectangle x:Name="FocusVisualWhite"
                                           IsHitTestVisible="False"
                                           Opacity="0"
                                           Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                                           StrokeDashArray="1,1"
                                           StrokeDashOffset="1.5"
                                           StrokeEndLineCap="Square" />
                                <Rectangle x:Name="FocusVisualBlack"
                                           IsHitTestVisible="False"
                                           Opacity="0"
                                           Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                                           StrokeDashArray="1,1"
                                           StrokeDashOffset="0.5"
                                           StrokeEndLineCap="Square" />
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal" />
                                        <VisualState x:Name="PointerOver">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                               Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="#CD0000" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                               Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="White" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                               Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="#9e0202" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                               Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="White" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                               Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="{StaticResource ButtonDisabledBackgroundThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                                               Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="{StaticResource ButtonDisabledBorderThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                               Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0"
                                                                            Value="{StaticResource ButtonDisabledForegroundThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="FocusStates">
                                        <VisualState x:Name="Focused">
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetName="FocusVisualWhite"
                                                                 Storyboard.TargetProperty="Opacity"
                                                                 To="1"
                                                                 Duration="0" />
                                                <DoubleAnimation Storyboard.TargetName="FocusVisualBlack"
                                                                 Storyboard.TargetProperty="Opacity"
                                                                 To="1"
                                                                 Duration="0" />
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Unfocused" />
                                        <VisualState x:Name="PointerFocused" />
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:InputPane">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:InputPane">
                            <Grid x:Name="PART_Root">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <syncresource:CalculatorButton Key="Number7"
                                                               x:Name="PART_Digit7"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="7"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number8"
                                                               x:Name="PART_Digit8"
                                                               Grid.Column="1"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="8"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number9"
                                                               x:Name="PART_Digit9"
                                                               Grid.Column="2"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="9"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number4"
                                                               x:Name="PART_Digit4"
                                                               Grid.Row="1"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="4"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number5"
                                                               x:Name="PART_Digit5"
                                                               Grid.Row="1"
                                                               Grid.Column="1"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="5"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number6"
                                                               x:Name="PART_Digit6"
                                                               Grid.Row="1"
                                                               Grid.Column="2"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="6"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number1"
                                                               x:Name="PART_Digit1"
                                                               Grid.Row="2"
                                                               Grid.Column="0"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="1"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number2"
                                                               x:Name="PART_Digit2"
                                                               Grid.Row="2"
                                                               Grid.Column="1"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="2"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number3"
                                                               x:Name="PART_Digit3"
                                                               Grid.Row="2"
                                                               Grid.Column="2"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="3"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Number0"
                                                               x:Name="PART_Digit0"
                                                               Grid.Row="3"
                                                               Grid.Column="0"
                                                               Grid.ColumnSpan="2"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="0"
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                                <syncresource:CalculatorButton Key="Decimal"
                                                               x:Name="PART_Decimal"
                                                               Grid.Row="3"
                                                               Grid.Column="2"
                                                               Background="#696969"
                                                               Command="{Binding ComputeExpressionCommand}"
                                                               Content="."
                                                               Foreground="{TemplateBinding Foreground}"
                                                               IsTabStop="False" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:DisplayPane">
                <Setter Property="BorderBrush" Value="#FFD6D6D6" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Foreground" Value="WhiteSmoke" />
                <Setter Property="Height" Value="70" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:DisplayPane">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Border Grid.RowSpan="2"
                                        Grid.ColumnSpan="2"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}" />
                                <TextBlock Grid.ColumnSpan="2"
                                           Height="20"
                                           Margin="8"
                                           HorizontalAlignment="Right"
                                           FontSize="14"
                                           FontWeight="ExtraLight"
                                           Foreground="{TemplateBinding Foreground}"
                                           Text="{TemplateBinding Expression}"
                                           TextAlignment="Right"
                                           TextTrimming="WordEllipsis"
                                           TextWrapping="Wrap" />
                                <Viewbox Grid.Row="1"
                                         Grid.Column="1"
                                         HorizontalAlignment="Right"
                                         VerticalAlignment="Bottom">
                                    <TextBlock Margin="8"
                                               VerticalAlignment="Center"
                                               FontSize="50"
                                               FontWeight="ExtraLight"
                                               Foreground="{TemplateBinding Foreground}"
                                               Text="{Binding DisplayText, RelativeSource={RelativeSource TemplatedParent}}" />
                                </Viewbox>
                                <TextBlock x:Name="PART_MemorySign"
                                           Grid.Row="1"
                                           Margin="8"
                                           VerticalAlignment="Bottom"
                                           Foreground="{TemplateBinding Foreground}"
                                           Text="M"
                                           Visibility="{Binding Path=Memory, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource MemoryConverter}}" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ms-appx:///Assets/Paths/Close.xaml" />
                <ResourceDictionary Source="ms-appx:///Assets/Paths/Previous-Arrow.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Page.DataContext>
        <viewModels:CalculatorViewModel />
    </Page.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="35" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0"
                Grid.Column="0"
                Background="{ThemeResource SystemControlAcrylicElementBrush}"
                BorderBrush="DarkGray"
                BorderThickness="0,0,0,0.3">
            <TextBlock Margin="8,0,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       FontWeight="ExtraBold"
                       Text="Basic Calculator" />
        </Border>

        <StackPanel Grid.Row="0"
                    Grid.Column="1"
                    Background="{ThemeResource SystemControlAcrylicElementBrush}"
                    Orientation="Horizontal">
            <Button Width="40"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    BorderBrush="DarkGray"
                    BorderThickness="0.2,0,0,0.3"
                    Command="{Binding NavigateBackCommand}">
                <Viewbox>
                    <Path Data="{StaticResource PreviousArrowGeometry}"
                          Fill="Transparent"
                          RenderTransformOrigin="0.6,0.5"
                          Stroke="LightGray">
                        <Path.RenderTransform>
                            <TransformGroup>
                                <TransformGroup.Children>
                                    <RotateTransform Angle="0" />
                                    <ScaleTransform ScaleX="1.1" ScaleY="1.1" />
                                </TransformGroup.Children>
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>
                </Viewbox>
            </Button>

            <Button Width="40"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    BorderBrush="DarkGray"
                    BorderThickness="0.2,0,0,0.3"
                    Command="{Binding CloseSubAppCommand}">
                <Viewbox>
                    <Path Data="{StaticResource CloseGeometry}"
                          Fill="Transparent"
                          RenderTransformOrigin="0.5,0.4"
                          Stroke="LightGray"
                          StrokeThickness="2">
                        <Path.RenderTransform>
                            <TransformGroup>
                                <TransformGroup.Children>
                                    <RotateTransform Angle="0" />
                                    <ScaleTransform ScaleX="0.7" ScaleY="0.7" />
                                </TransformGroup.Children>
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>
                </Viewbox>
            </Button>
        </StackPanel>

        <Grid Grid.Row="1"
              Grid.ColumnSpan="2"
              Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
            <Grid Grid.Row="0"
                  Margin="20"
                  Padding="20"
                  Background="#181818">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Viewbox Grid.Row="0">
                    <syncresource:SfCalculator x:Name="calculator"
                                               DisplayText="{Binding DisplayText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                               Expression="{Binding ExpressionText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                               FunctionsPaneStyle="{StaticResource SfCalculatorFunctionsPaneStyle1}"
                                               Style="{StaticResource DefaultSfCalculatorStyle}" />
                </Viewbox>

                <Grid Grid.Column="1"
                      Background="#3A3A3A"
                      Opacity="0.95">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0"
                            BorderBrush="Gray"
                            BorderThickness="4,4,4,2">
                        <TextBlock Padding="8,0,0,0"
                                   FontSize="30"
                                   Text="History" />
                    </Border>

                    <ScrollViewer Grid.Row="1"
                                  BorderBrush="Gray"
                                  BorderThickness="4,0,4,1"
                                  IsTabStop="True">
                        <StackPanel>
                            <ItemsControl x:Name="tStack"
                                          ItemsSource="{Binding Expressions}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <ListViewItem Margin="0,2,0,2"
                                                      HorizontalAlignment="Stretch"
                                                      HorizontalContentAlignment="Right">
                                            <StackPanel>
                                                <TextBlock HorizontalTextAlignment="Right"
                                                           Text="{Binding Expression}"
                                                           TextWrapping="WrapWholeWords" />
                                                <TextBlock FontSize="20"
                                                           FontWeight="Bold"
                                                           HorizontalTextAlignment="Right"
                                                           Text="{Binding Result}"
                                                           TextWrapping="Wrap" />
                                            </StackPanel>
                                        </ListViewItem>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>

                    <Button Grid.Row="2"
                            MinHeight="35"
                            HorizontalAlignment="Stretch"
                            BorderBrush="Gray"
                            BorderThickness="4,0,4,4"
                            Command="{Binding ClearHistoryCommand}"
                            Content="Clear"
                            Style="{StaticResource ActionButton}" />
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</Page>