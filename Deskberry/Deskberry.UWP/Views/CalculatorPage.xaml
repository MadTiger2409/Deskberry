<Page
    x:Class="Deskberry.UWP.Views.CalculatorPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Deskberry.UWP.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModels="using:Deskberry.UWP.ViewModels"
    xmlns:input="using:Syncfusion.UI.Xaml.Controls.Input"
	xmlns:syncresource="using:Syncfusion.UI.Xaml.Controls.Input"
    mc:Ignorable="d"
    Background="Transparent">
    <Page.Resources>
        <ResourceDictionary>
            <syncresource:ResourceWrapper x:Key="ResourceWrapperKey"/>
            <input:MemoryConverter x:Key="MemoryConverter" />

            <Style TargetType="input:SfCalculator" x:Key="DefaultSfCalculatorStyle">
                <Setter Property="Height" Value="380" />
                <Setter Property="Width" Value="300" />
                <Setter Property="Background" Value="DimGray" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:SfCalculator">
                            <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <input:DisplayPane Grid.ColumnSpan="2" x:Name="PART_Display"   
                                               Margin="3"
                                                DisplayText="{Binding DisplayText,
                                                                     RelativeSource={RelativeSource TemplatedParent}}"
                                               Expression="{Binding Expression,
                                                                    RelativeSource={RelativeSource TemplatedParent}}"
                                               IsTabStop="False"
                                               Memory="{Binding Memory,
                                                                RelativeSource={RelativeSource TemplatedParent}}" />
                                    <input:FunctionsPane x:Name="PART_Functions"
                                                 Grid.Row="2"
                                                 Grid.Column="1"
                                                     
                                                 IsTabStop="False"
                                                 Style="{TemplateBinding FunctionsPaneStyle}" />
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="SfCalculatorFunctionsPaneStyle1" TargetType="input:FunctionsPane">
                <Setter Property="Foreground" Value="Black"/>
                <Setter Property="Background" Value="WhiteSmoke"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:FunctionsPane">
                            <Grid x:Name="PART_Root">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <input:CalculatorButton x:Name="PART_Button1" BrushOpacity="0.3" Content="{Binding MC, Source={StaticResource ResourceWrapperKey}}" Grid.Column="0" Function="MemoryClear" Background="DarkRed" FontSize="15" IsTabStop="False"/>
                                <input:CalculatorButton x:Name="PART_Button2" BrushOpacity="0.3" Content="{Binding MR, Source={StaticResource ResourceWrapperKey}}" Grid.Column="1" Function="MemoryRecall"  Background="DarkRed" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False"/>
                                <input:CalculatorButton x:Name="PART_Button3" BrushOpacity="0.3" Content="{Binding MS, Source={StaticResource ResourceWrapperKey}}" Grid.Column="2" Function="Memory" Background="DarkRed" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False"/>
                                <input:CalculatorButton x:Name="PART_Button4" BrushOpacity="0.3" Content="{Binding MPLUS, Source={StaticResource ResourceWrapperKey}}" Grid.Column="3" Function="MemoryAdd" Background="DarkRed" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False"/>
                                <input:CalculatorButton x:Name="PART_Button5" BrushOpacity="0.3" Content="{Binding MMINUS, Source={StaticResource ResourceWrapperKey}}" Grid.Column="4" Function="MemorySubract" Background="DarkRed" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False"/>
                                <input:CalculatorButton x:Name="PART_Button6" BrushOpacity="0.3" Function="Back" FontSize="15" IsTabStop="False" Key="Back" Grid.Row="1">
                                    <Path Data="M55.59375,47.9995803833008L69.890625,62.2964553833008 84.09375,48.0933303833008 89.953125,53.9527053833008 75.703125,68.1558303833008 89.625,82.0777053833008 83.8125,87.8902053833008 69.890625,73.9683303833008 55.640625,88.2652053833008 49.78125,82.3589553833008 63.609375,67.9214553833008 49.734375,53.8589553833008 55.59375,47.9995803833008z M31.265625,40.0308303833008L30.28125,40.5933303833008 29.25,41.4370803833008 2.43749928474426,68.1558303833008 29.203125,94.8277053833008 30.28125,95.6948928833008 31.265625,96.2808303833008 119.34375,96.2808303833008 119.34375,40.0308303833008 31.265625,40.0308303833008z M30.984375,32.5308303833008L121.546875,32.5308303833008 123.5859375,32.9527053833008 125.2734375,34.1245803833008 126.421875,35.8589553833008 126.84375,37.9683303833008 126.84375,98.3433303833008 126.421875,100.452705383301 125.2734375,102.187080383301 123.5859375,103.358955383301 121.546875,103.780830383301 30.984375,103.780830383301 28.359375,103.218330383301 26.109375,101.952705383301 23.90625,100.124580383301 -8.203125,68.1558303833008 23.90625,36.1870803833008 26.109375,34.3589553833008 28.359375,33.1167678833008 30.984375,32.5308303833008z" Fill="{TemplateBinding Foreground}" Height="20" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" Stretch="Uniform" Width="20">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0"/>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </input:CalculatorButton>
                                <input:CalculatorButton x:Name="PART_Button7" BrushOpacity="0.3" Content="{Binding C, Source={StaticResource ResourceWrapperKey}}" Grid.Column="1" Function="Clear" Foreground="{TemplateBinding Foreground}"  FontSize="15" IsTabStop="False" Grid.Row="1"/>
                                <input:CalculatorButton x:Name="PART_Button8" BrushOpacity="0.3" Content="{Binding CE, Source={StaticResource ResourceWrapperKey}}" Grid.Column="2" Function="ClearEntry" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False" Grid.Row="1"/>
                                <input:CalculatorButton x:Name="PART_Button9" BrushOpacity="0.3" Content="±" Grid.Column="3" Function="Sign" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False" Grid.Row="1"/>
                                <input:CalculatorButton x:Name="PART_Button10"
                                                        BrushOpacity="0.3"
                                                        Content="√"
                                                        Grid.Column="4"
                                                        Function="SquareRoot"
                                                        Foreground="{TemplateBinding Foreground}"
                                                        FontSize="15"
                                                        IsTabStop="False"
                                                        Grid.Row="1"
                                                        Command="{Binding ComputeExpressionForOneParameterOperationCommand}"/>
                                
                                <input:CalculatorButton x:Name="PART_Button11" BrushOpacity="0.3" Content="/" Grid.Column="3" Function="Divide" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False" Grid.Row="2"/>
                                <input:CalculatorButton x:Name="PART_Button12" BrushOpacity="0.3" Grid.Column="3" Function="Multiply" FontSize="15" IsTabStop="False" Grid.Row="3">
                                    <Path Data="M28.03125,48.5152053833008L48,68.5308303833008 67.96875,48.5152053833008 75.515625,56.1089553833008 55.546875,76.0777053833008 75.515625,96.0464553833008 67.96875,103.593330383301 48,83.6245803833008 28.03125,103.593330383301 20.484375,96.0464553833008 40.453125,76.0777053833008 20.484375,56.1089553833008 28.03125,48.5152053833008z" Fill="{TemplateBinding Foreground}" Height="15" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" Stretch="Uniform" Width="15">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0"/>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </input:CalculatorButton>
                                <input:CalculatorButton x:Name="PART_Button13" BrushOpacity="0.3" Grid.Column="3" Function="Subract" FontSize="15" IsTabStop="False" Grid.Row="4">
                                    <Path Data="M13.078125,59.8120803833008L82.96875,59.8120803833008 82.96875,75.9370803833008 13.078125,75.9370803833008 13.078125,59.8120803833008z" Fill="{TemplateBinding Foreground}" Height="15" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" Stretch="Uniform" Width="15">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0"/>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </input:CalculatorButton>
                                <input:CalculatorButton x:Name="PART_Button14" BrushOpacity="0.3" Grid.Column="3" Function="Add" FontSize="15" IsTabStop="False" Grid.Row="5">
                                    <Path Data="M39.9375,32.9527053833008L56.0625,32.9527053833008 56.0625,59.8120803833008 82.96875,59.8120803833008 82.96875,75.9370803833008 56.0625,75.9370803833008 56.0625,102.796455383301 39.9375,102.796455383301 39.9375,75.9370803833008 13.078125,75.9370803833008 13.078125,59.8120803833008 39.9375,59.8120803833008 39.9375,32.9527053833008z" Fill="{TemplateBinding Foreground}" Height="15" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5" Stretch="Uniform" Width="15">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <RotateTransform Angle="0"/>
                                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </input:CalculatorButton>
                                <input:CalculatorButton x:Name="PART_Button15" BrushOpacity="0.3" Content="%" Grid.Column="4" Function="Percentage" Foreground="{TemplateBinding Foreground}" FontSize="15" IsTabStop="False" Grid.Row="2"/>
                                <input:CalculatorButton x:Name="PART_Button16"
                                                        BrushOpacity="0.3"
                                                        Content="1/x"
                                                        Grid.Column="4"
                                                        Function="Reciproc"
                                                        FlowDirection="LeftToRight"
                                                        Foreground="{TemplateBinding Foreground}"
                                                        FontSize="15" IsTabStop="False"
                                                        Grid.Row="3"
                                                        Command="{Binding ComputeExpressionForOneParameterOperationCommand}"/>
                                
                                <input:CalculatorButton x:Name="PART_Button17"
                                                        Content="="
                                                        Grid.RowSpan="2"
                                                        Grid.Column="4"
                                                        Grid.Row="4"
                                                        Background="#a82828"
                                                        BrushOpacity="0"
                                                        Foreground="{TemplateBinding Foreground}"
                                                        FontSize="35"
                                                        IsTabStop="False"
                                                        Function="Return"
                                                        Command="{Binding AddExpressionCommand}"
                                                        CommandParameter="{Binding ElementName=calculator, Path=Value}"/>
                                <input:InputPane x:Name="PART_Input" Grid.ColumnSpan="3" IsTabStop="False" Grid.RowSpan="5" Grid.Row="2"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:CalculatorButton">
                <Setter Property="IsTabStop" Value="False" />
                <Setter Property="Background" Value="Gray" />
                <Setter Property="Foreground" Value="Black" />
                <Setter Property="BorderBrush" Value="DarkGray" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Margin" Value="3" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="FontFamily" Value="Segoe UI Symbol" />
                <Setter Property="FontWeight" Value="ExtraLight" />
                <Setter Property="FontSize" Value="20" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:CalculatorButton">
                            <Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal" />
                                        <VisualState x:Name="PointerOver">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#CD0000" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="White" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#9e0202" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="White" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledBackgroundThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="BorderBrush">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledBorderThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledForegroundThemeBrush}" />
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="FocusStates">
                                        <VisualState x:Name="Focused">
                                            <Storyboard>
                                                <DoubleAnimation Duration="0"
                                                         Storyboard.TargetName="FocusVisualWhite"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1" />
                                                <DoubleAnimation Duration="0"
                                                         Storyboard.TargetName="FocusVisualBlack"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1" />
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Unfocused" />
                                        <VisualState x:Name="PointerFocused" />
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Rectangle Fill="{TemplateBinding Background}" />
                                <Rectangle Fill="White" Opacity="{TemplateBinding BrushOpacity}" />

                                <Border x:Name="Border"
                                
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                    <ContentPresenter x:Name="ContentPresenter"
                                              Margin="{TemplateBinding Padding}" FontSize="16"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              ContentTransitions="{TemplateBinding ContentTransitions}" />
                                </Border>

                                <Rectangle x:Name="FocusVisualWhite"
                                   IsHitTestVisible="False"
                                   Opacity="0"
                                   Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                                   StrokeDashArray="1,1"
                                   StrokeDashOffset="1.5"
                                   StrokeEndLineCap="Square" />
                                <Rectangle x:Name="FocusVisualBlack"
                                   IsHitTestVisible="False"
                                   Opacity="0"
                                   Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                                   StrokeDashArray="1,1"
                                   StrokeDashOffset="0.5"
                                   StrokeEndLineCap="Square" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:InputPane">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:InputPane">
                            <Grid x:Name="PART_Root">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <input:CalculatorButton Key="Number7" Command="{Binding ComputeExpressionCommand}" IsTabStop="False" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Content="7" x:Name="PART_Digit7" />
                                <input:CalculatorButton Key="Number8"
                                                        Command="{Binding ComputeExpressionCommand}" IsTabStop="False" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Column="1" Content="8" x:Name="PART_Digit8"/>
                                <input:CalculatorButton Key="Number9" Command="{Binding ComputeExpressionCommand}" IsTabStop="False" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Column="2" Content="9" x:Name="PART_Digit9"/>
                                <input:CalculatorButton Key="Number4" Command="{Binding ComputeExpressionCommand}" IsTabStop="False" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="1" Content="4" x:Name="PART_Digit4" />
                                <input:CalculatorButton Key="Number5" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="1" Grid.Column="1" Content="5" x:Name="PART_Digit5"/>
                                <input:CalculatorButton Key="Number6" IsTabStop="False" Background="#696969" Command="{Binding ComputeExpressionCommand}"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="1" Grid.Column="2" Content="6" x:Name="PART_Digit6"/>
                                <input:CalculatorButton Key="Number1" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="2" Grid.Column="0" Content="1" x:Name="PART_Digit1"/>
                                <input:CalculatorButton Key="Number2" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="2" Grid.Column="1" Content="2" x:Name="PART_Digit2"/>
                                <input:CalculatorButton Key="Number3" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="2" Grid.Column="2" Content="3" x:Name="PART_Digit3"/>
                                <input:CalculatorButton Key="Number0" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"
                                                        Content="0" x:Name="PART_Digit0"/>
                                <input:CalculatorButton Key="Decimal" IsTabStop="False" Command="{Binding ComputeExpressionCommand}" Background="#696969"
                                                        Foreground="{TemplateBinding Foreground}" Grid.Row="3" Grid.Column="2" Content="." x:Name="PART_Decimal"/>

                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="input:DisplayPane">
                <Setter Property="BorderBrush" Value="#FFD6D6D6" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Foreground" Value="WhiteSmoke"/>
                <Setter Property="Height" Value="70" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="input:DisplayPane">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Border Grid.RowSpan="2"
                                Grid.ColumnSpan="2"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" />
                                <TextBlock Grid.ColumnSpan="2" Height="20"
                                   Margin="8" Foreground="{TemplateBinding Foreground}"
                                   HorizontalAlignment="Right"
                                   FontSize="14" TextTrimming="WordEllipsis"
                                   FontWeight="ExtraLight"
                                   Text="{TemplateBinding Expression}"
                                   TextAlignment="Right"
                                   TextWrapping="Wrap" />
                                <Viewbox Grid.Row="1"
                                 Grid.Column="1"
                                 HorizontalAlignment="Right"
                                 VerticalAlignment="Bottom">
                                    <TextBlock Margin="8" Foreground="{TemplateBinding Foreground}"
                                       VerticalAlignment="Center"
                                       FontSize="50"
                                       FontWeight="ExtraLight"
                                       Text="{Binding DisplayText,
                                                      RelativeSource={RelativeSource TemplatedParent}}" />
                                </Viewbox>
                                <TextBlock Grid.Row="1" x:Name="PART_MemorySign"
                                   Margin="8" Foreground="{TemplateBinding Foreground}"
                                   VerticalAlignment="Bottom"
                                   Text="M"
                                   Visibility="{Binding Path=Memory,
                                                        RelativeSource={RelativeSource TemplatedParent},
                                                        Converter={StaticResource MemoryConverter}}" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ms-appx:///Assets/Paths/Close.xaml"/>
                <ResourceDictionary Source="ms-appx:///Assets/Paths/Previous-Arrow.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Page.DataContext>
        <viewModels:CalculatorViewModel/>
    </Page.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="35"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Column="0"
                Grid.Row="0"
                BorderThickness="0,0,0,0.3"
                BorderBrush="DarkGray"
                Background="{ThemeResource SystemControlAcrylicElementBrush}">
            <TextBlock Text="Super Notes"
                       FontWeight="ExtraBold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"
                       Margin="8,0,0,0"/>
        </Border>



        <StackPanel Orientation="Horizontal"
                    Grid.Column="1"
                    Grid.Row="0"
                    Background="{ThemeResource SystemControlAcrylicElementBrush}">
            <Button Background="Transparent"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    BorderBrush="DarkGray"
                    BorderThickness="0.2,0,0,0.3"
                    Width="40"
                    Command="{Binding NavigateBackCommand}">
                <Viewbox>
                    <Path Data="{StaticResource PreviousArrowGeometry}"
                          Fill="Transparent"
                          Stroke="LightGray"
                      RenderTransformOrigin="0.6,0.5">
                        <Path.RenderTransform>
                            <TransformGroup>
                                <TransformGroup.Children>
                                    <RotateTransform Angle="0"/>
                                    <ScaleTransform ScaleX="1.1" ScaleY="1.1"/>
                                </TransformGroup.Children>
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>
                </Viewbox>
            </Button>

            <Button Background="Transparent"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    BorderBrush="DarkGray"
                    BorderThickness="0.2,0,0,0.3"
                    Width="40"
                    Command="{Binding CloseSubAppCommand}">
                <Viewbox>
                    <Path Data="{StaticResource CloseGeometry}"
                          Fill="Transparent"
                          Stroke="LightGray"
                          StrokeThickness="2"
                          RenderTransformOrigin="0.5,0.4">
                        <Path.RenderTransform>
                            <TransformGroup>
                                <TransformGroup.Children>
                                    <RotateTransform Angle="0"/>
                                    <ScaleTransform ScaleX="0.7" ScaleY="0.7"/>
                                </TransformGroup.Children>
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>
                </Viewbox>
            </Button>
        </StackPanel>

        <Grid Grid.Row="1"
              Grid.ColumnSpan="2"
              Background="Black">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4.5*"/>
                <ColumnDefinition Width="2.5*"/>
            </Grid.ColumnDefinitions>

            <Viewbox Grid.Row="0"
                     Margin="20">
                <input:SfCalculator x:Name="calculator"
                                    DisplayText="{Binding DisplayText,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                    Expression="{Binding ExpressionText,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                    Style="{StaticResource DefaultSfCalculatorStyle}"
                                    FunctionsPaneStyle="{StaticResource SfCalculatorFunctionsPaneStyle1}"/>
            </Viewbox>

            <Grid Grid.Column="1"
                  Background="#3A3A3A"
                  Opacity="0.95">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border Grid.Row="0"
                        BorderBrush="Gray"
                        BorderThickness="2,0,2,2">
                    <TextBlock  Text="History"
                                FontSize="30"
                                Padding="8,0,0,0"/>
                </Border>
                
                <ScrollViewer Grid.Row="1"
                              BorderBrush="Gray"
                              BorderThickness="2,0,2,2">
                    <StackPanel>
                        <ItemsControl x:Name="tStack" ItemsSource="{Binding Expressions}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Vertical"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <ListViewItem HorizontalAlignment="Stretch"
                                                  HorizontalContentAlignment="Right"
                                                  Margin="0,2,0,2">
                                        <StackPanel >
                                            <TextBlock Text="{Binding Expression}"
                                                       TextWrapping="WrapWholeWords"
                                                       HorizontalTextAlignment="Right"/>
                                            <TextBlock Text="{Binding Result}"
                                                       TextWrapping="Wrap"
                                                       FontSize="20"
                                                       FontWeight="Bold"
                                                       HorizontalTextAlignment="Right"/>
                                        </StackPanel>
                                    </ListViewItem>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>

                <Button Grid.Row="2"
                        Content="Clear"
                        HorizontalAlignment="Stretch"
                        MinHeight="35"
                        Style="{StaticResource ActionButton}"/>
            </Grid>
        </Grid>
    </Grid>
</Page>
